<div id="header-content"></div>
<script type="text/javascript" src="js/jquery-1.10.2.js"></script>
<script> 
    $(function(){
      $("#header-content").load("header.html"); 
    });
    </script> 
        <div class="content">

    
        <form id="dropFileForm">
            <input type="file" name="file" id="fileInput" onchange="addFiles(event)">
          
            <label for="fileInput" id="fileLabel" ondragover="overrideDefault(event);fileHover();" ondragenter="overrideDefault(event);fileHover();" ondragleave="overrideDefault(event);fileHoverEnd();" ondrop="overrideDefault(event);fileHoverEnd();
                  addFiles(event);">
              <img id="uploadImg" src="images/upload.png">
              <br>              <br>

              <span id="fileLabelText">
                Choose a file or drag it here
              </span>
              <br>
              <span id="uploadStatus"></span>
            </label>
          
          </form>    
                      <input type="submit" value="Upload" class="uploadButton" onclick="upload()">

        </div>


        <form enctype="multipart/form-data" id="dropFileForm2">
          <input type="file" name="File" id="fileInput2">
        </form>    
        <input type="submit" value="Upload" class="uploadButton" onclick="upload()">

            </body>




            <script>


function upload() {
  var form = $("#dropFileForm2");
  console.log(form.serialize());
  console.log($("#fileInput2").val());

  
  var formData = new FormData();
  console.log(droppedFiles);
  for (var i = 0, file; (file = droppedFiles[i]); i++) {
    formData.append(fileInput.name, file, file.name);
  }
  $.ajax({
           type: "POST",
           url: url + "/caff",
           data: formData, // serializes the form's elements.
           beforeSend: function (xhr) {   //Include the bearer token in header
            xhr.setRequestHeader("Authorization", 'Bearer '+ token);
        },
           success: function(data)
           {
               console.log(data); // show response from the php script.
           },
           error: function(e) {
            console.log(e);
           }
         });
}
                var dropFileForm = document.getElementById("dropFileForm");
var fileLabelText = document.getElementById("fileLabelText");
var uploadStatus = document.getElementById("uploadStatus");
var fileInput = document.getElementById("fileInput");
var droppedFiles;

function overrideDefault(event) {
  event.preventDefault();
  event.stopPropagation();
}

function fileHover() {
  dropFileForm.classList.add("fileHover");
}

function fileHoverEnd() {
  dropFileForm.classList.remove("fileHover");
}

function addFiles(event) {
  droppedFiles = event.target.files || event.dataTransfer.files;
  showFiles(droppedFiles);
}

function showFiles(files) {
  if (files.length > 1) {
    fileLabelText.innerText = files.length + " files selected";
  } else {
    fileLabelText.innerText = files[0].name;
  }
}

function uploadFiles(event) {
  event.preventDefault();
  changeStatus("Uploading...");

  var formData = new FormData();

  for (var i = 0, file; (file = droppedFiles[i]); i++) {
    formData.append(fileInput.name, file, file.name);
  }

  var xhr = new XMLHttpRequest();
  xhr.onreadystatechange = function(data) {
    //handle server response and change status of
    //upload process via changeStatus(text)
    console.log(xhr.response);
  };
  xhr.open(dropFileForm.method, dropFileForm.action, true);
  xhr.send(formData);
}

function changeStatus(text) {
  uploadStatus.innerText = text;
}

            </script>
            <style>

                #uploadImg {
                    width: 5vw;
                }

                #dropFileForm {
  margin-left: 25vw;
  margin-right: 25vw;
  text-align: center;
  border-radius: 1vw;
  overflow: hidden;
  transition: 0.5s;
  margin-top: 4vw;
}

#dropFileForm #fileLabel {
  background-color: #e29470;
  display: block;
  padding: 5vw;
  padding-top: 8vw;
  padding-bottom: 8vw;
  position: relative;
  cursor: pointer;
  color: white;
}

#dropFileForm #fileInput {
  display: none;
}

#dropFileForm #fileLabel:after,
#dropFileForm #fileLabel:before {
  position: absolute;
  content: "";
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  background-color: #fff;
  z-index: -2;
  border-radius: 1vw 1vw 0 0;
}

#dropFileForm #fileLabel:before {
  z-index: -1;
  background: repeating-linear-gradient(
    45deg,
    transparent,
    transparent 5%,
    black 5%,
    black 10%
  );
  opacity: 0;
  transition: 0.5s;
}

#dropFileForm.fileHover #fileLabel:before {
  opacity: 0.25;
}

#dropFileForm .uploadButton {
  border: 0;
  outline: 0;
  width: 100%;
  padding: 1vw;
  background-color: #e26b33;
  color: #fff;
  cursor: pointer;
  margin: 0;
}

#dropFileForm.fileHover {
  box-shadow: 0 0 16px limeGreen;
}

            </style>